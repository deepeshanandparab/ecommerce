{% extends 'base.html' %}
{% load custom_filter %}

{% block content %}
<div class="container-fluid mt-3">
    <div class="row">
        {% for product in products_list %}
        <div class="col-sm-12 col-lg-6 mb-3">
            <div class="row">
                <div class="col-12" id="product_profile_img">
                    <img src="{{ product.product.all.0.image.url }}" class="img img-thumbnail">
                </div>
            </div>
            <div class="row mt-3">
                {% for album in product.product.all %}
                <div class="col-4">
                    <img class="img img-thumbnail cursor-pointer" style="width: 100%; height: 150px"
                        src="{{ album.image.url }}" onclick="divPic('{{ album.image.url }}')">
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="col-sm-12 col-lg-6 mb-3">
            <div class="row">
                <div class="col-10">
                    <h3 class="text-capitalize">{{product.name}}</h3>
                </div>
                <div class="col-2">
                    {% if request.session.username %}
                    <form method="post">
                        {% csrf_token %}
                        <a href="{% url 'product_wishlist' product.id %}" class="no-text-decoration" title="Wishlist">
                            {% if is_wishlisted %}
                            <i class="fa fa-heart fa-2x text-danger"></i>
                            {% else %}
                            <i class="far fa-heart fa-2x text-danger"></i>
                            {% endif %}
                        </a>
                    </form>
                    {% endif %}
                </div>
            </div>

            <h5 class="text-justify">{{product.description}}</h5>
            <i>Original Art by: {{product.original_art_by}}</i></br>
            <i>Art by: {{product.artist}}</i></br>
            <i>Sold by: {{product.sold_by}}</i>
            {% if product.discount == 0 %}
            <h5 class="my-3">Price: {{product.price|inrcurrency|currency}}</h5>
            {% else %}
            <h5 class="my-3">
                Price: <del>{{product.price|inrcurrency|currency}}</del>
                <small>{{product.price|discountedprice:product.discount|inrcurrency|currency}}</small>
            </h5>
            {% endif %}


            {% if product.canvas_product.count > 0 %}
            <div class="row mb-2">
                <div class="col-3">
                    <p>Canvas Size</p>
                </div>
                <div class="col-9">
                    {% for canvas in product.canvas_product.all %}
                    {% if canvas.in_stock %}
                    <button type="button" class="btn btn-outline-success mb-1" title="In Stock">
                        {{canvas.canvas_size}}
                    </button>
                    {% else %}
                    <button type="button" class="btn btn-outline-dark mb-1" title="Out of Stock" disabled>
                        {{canvas.canvas_size}}
                    </button>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            <button type="button" class="btn btn-outline-secondary">Add to Cart</button>
            <button type="button" class="btn btn-outline-secondary col-3">Buy</button>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}